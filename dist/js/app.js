!function(){function t(t){return t?t.toArray?t.toArray():t:[]}function e(t,e){void 0===e&&(e="Anon"),this._id=s++,this._text=t,this._author=e,this._created=new Date}var s=0;e.prototype.author=function(t){return this._author},e.prototype.setAuthor=function(t){return this._author=t,this},e.prototype.text=function(t){return this._text},e.prototype.setText=function(t){return this._text=t,this},e.prototype.created=function(t){return this._created},e.prototype.setCreated=function(t){return this._created=t,this},e.prototype.id=function(){return this._id},tag$.defineTag("message","li",function(t){t.prototype.render=function(){var t,e,s;return this.setChildren([(t=this.$a=this.$a||tag$.$div().flag("date")).setContent(this.object().created().toLocaleString(),3).end(),(e=this.$b=this.$b||tag$.$div().flag("message")).setContent([(s=e.$$a=e.$$a||tag$.$span().flag("name")).setContent(this.object().author(),3).end()," - "+this.object().text()],1).end()],2).synced()}}),tag$.defineTag("app",function(s){s.prototype.messages=function(t){return this._messages},s.prototype.setMessages=function(t){return this._messages=t,this},s.prototype.build=function(){return this.messages().push(new e("I am a fake message.")),this.messages().push(new e("Hello")),this.messages().push(new e("Sup?","Bob?!!")),this.schedule()},s.prototype.onsubmit=function(t){var s;return t.cancel().halt(),this.messages().push(new e(this._text.value(),this._name.value()||void 0)),this._text.setValue(s=""),s},s.prototype.hallo=function(t){return console.log(t)},s.prototype.reversed=function(){return this.messages().sort(function(t,e){return e.created()-t.created()})},s.prototype.render=function(){var e,s,n=this;return this.setChildren([(this.$a=this.$a||tag$.$h1().setHandler("tap","hallo",this)).setText("An Imba Chat Room").end(),(e=this.$b=this.$b||tag$.$form()).setContent([(this._name=this._name||tag$.$input().setRef("name",this).setPlaceholder("Your Alias")).end(),(this._text=this._text||tag$.$input().setRef("text",this).setPlaceholder("Enter Message")).end(),(e.$$c=e.$$c||tag$.$button().setType("submit")).setText("Submit").end()],2).end(),this.messages().length>0?(s=n.$c=n.$c||tag$.$ul().flag("messages")).setContent(function(e){for(var s,r=0,a=t(n.reversed()),i=a.length,o=[];i>r;r++)s=a[r],o.push((e["_"+s.id()]=e["_"+s.id()]||tag$.$message()).setObject(s).end());return o}(s),3).end():void 0],1).synced()}});var n=tag$.$app().setMessages([]).end();return q$$("#chatapp").append(n)}();